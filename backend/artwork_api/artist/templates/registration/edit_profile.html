<!DOCTYPE html>
{% extends 'webBase.html' %}
{% block content %}
{% load thumbnail %}
<style>
  .fileUpload {
    position: relative;
    overflow: hidden;
    margin: 10px;
  }
  .fileUpload input.upload {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    padding: 0;
    font-size: 20px;
    cursor: pointer;
    opacity: 0;
    filter: alpha(opacity=0);
  }
</style>

<nav class="navbar navbar-expand-lg navbar-custom2">
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active-custom">
        <a class="nav-link active-custom text-white" href="{% url 'explore'%}">Explore</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white" href="{% url 'dashboard'%}">My Artworks</a>
      </li>
    </ul>
  </div>
</nav>

<div id="desktopcontent" style="padding-right: 10px;margin: 20px;">
  <br>
  <form method="POST" action="{% url 'edit_profile_action' object.pk %}" enctype="multipart/form-data" id="profileform">
    {% csrf_token %}
      <div class="row align-items-start">
        <div class="col-sm" style="text-align: center;">
          {% if user.profile.profile_picture %}
            <img src="{{ user.profile.profile_picture|thumbnail_url:'Profile_picture' }}" width="30%" style="border-radius: 50%;width: 180px;height: 180px;flex-shrink: 0;object-fit: cover;background-color: white;" id="profilePic">
          {% else %}
            <img src="../../media/images/static_profile.png" width="30%" style="border-radius: 50%;width: 180px;height: 180px;flex-shrink: 0;object-fit: cover;background-color: white;" id="profilePic">
          {% endif %}
          <br><br>
          <div class="fileUpload btn btn-custom">
            <span>Upload Profile Picture</span>
            <input type="file" class="upload" name="newprofilepic" id="desktopImgInp">
          </div>
        </div>
        <div class="col-sm">
          {% csrf_token %}
          Username <input type="text" value="{{ user.profile.user }}" name="username" class="form-control" style="width: 371px;"><br>
          <input type="hidden" value="{{ user.pk }}" name="user">
          Email <input type="text" value="{{ user.profile.email }}" name="email" class="form-control" style="width: 371px;"><br>
          Bio <textarea name="bio" form="profileform" class="form-control" style="width: 371px;">{{ user.profile.bio }}</textarea><br><br>
          <a href="{% url 'changePassword' %}" class="btn btn-custom" role="button">Change user's password</a><br><br>
          <strong>Social Links</strong><br><br>
          Instagram <input type="text" value="{{ user.profile.Instagram }}" name="Instagram" class="form-control" style="width: 371px;"><br>
          Twitter <input type="text" value="{{ user.profile.Twitter }}" name="Twitter" class="form-control" style="width: 371px;"><br>
          Facebook <input type="text" value="{{ user.profile.Facebook }}" name="Facebook" class="form-control" style="width: 371px;"><br>
        </div>
      </div>
      <div class="form-group" style="text-align: center;">
        <br><br>
        <input type="submit" class="btn btn-custom" value="Update your profile"><br><br>
      </div>
  </form>
  
</div>
<div class="container-fluid footer" style="background-color: #EB5160;bottom: 0pt;min-height: 100%;display: flex;flex-direction: column;">
  <footer class="row ">
    <div class="col align-items-center" style="margin-top: 10px;">
      <span class="mb-3 mb-md-0 text-white"><h5>Â© 2023 Artvengers, Inc</h5></span>
    </div>
    <div class="col align-items-center" style="float: right;">
      <a class="btn btn-social text-white btn-facebook"><i class="fa fa-facebook"></i> Facebook</a>
      <a class="btn btn-social text-white btn-instagram"><i class="fa fa-instagram"></i> Instagram</a>
      <a class="btn btn-social text-white btn-linkedin"><i class="fa fa-linkedin"></i> LinkedIn</a>
      <a class="btn btn-social text-white btn-pinterest"><i class="fa fa-pinterest"></i> Pinterest</a>
      <a class="btn btn-social text-white btn-twitter"><i class="fa fa-twitter"></i> Twitter</a>
    </div>
  </footer>
</div>
<div style="margin-left: -0.5em;" id="mobcontent">
  <br>
  <form method="POST" action="{% url 'edit_profile_action' object.pk %}" enctype="multipart/form-data" id="profileform">
        {% csrf_token %}
       
    <table>
    <div class="row align-items-start">
      <div class="col-sm" style="text-align: center;">
        {% if user.profile.profile_picture %}
          <img src="{{ user.profile.profile_picture|thumbnail_url:'Profile_picture' }}" width="30%" style="border-radius: 50%;width: 180px;height: 180px;flex-shrink: 0;object-fit: cover;background-color: white;" id="profilePicmob">
        {% else %}
          <img src="../../media/images/static_profile.png" width="30%" style="border-radius: 50%;width: 180px;height: 180px;flex-shrink: 0;object-fit: cover;background-color: white;" id="profilePicmob">
        {% endif %}
        <br><br>
        <div class="fileUpload btn btn-custom">
          <span>Upload Profile Picture</span>
          <input type="file" class="upload" name="newprofilepicmob" id="mobileImgInp">
        </div>
      </div>
      <div class="col-sm" style="margin-left: 2em;">
        
        {% csrf_token %}
        Username <input type="text" value="{{ user.profile.user }}" name="username" class="form-control" style="width: 371px;"><br>
        <input type="hidden" value="{{ user.pk }}" name="user">
        Email <input type="text" value="{{ user.profile.email }}" name="email" class="form-control" style="width: 371px;"><br>
          Bio <textarea name="biomob" form="profileform" class="form-control" style="width: 371px;">{{ user.profile.bio }}</textarea><br><br>


          <a href="{% url 'changePassword' %}" class="btn btn-custom" role="button">Change user's password</a><br><br>
          
          <strong>Social Links</strong><br><br>
          
          Instagram <input type="text" value="{{ user.profile.Instagram }}" name="Instagram" class="form-control" style="width: 371px;"><br>
          Twitter <input type="text" value="{{ user.profile.Twitter }}" name="Twitter" class="form-control" style="width: 371px;"><br>
          Facebook <input type="text" value="{{ user.profile.Facebook }}" name="Facebook" class="form-control" style="width: 371px;"><br>
      </div>
    </div>
    <div class="form-group" style="text-align:center;">
        
            
            
            <br><br>
            <input type="submit" class="btn btn-custom" value="Update your profile"><br><br>
    </div>

    </form>
</div>

<script>
  const desktopImgInp = document.getElementById("desktopImgInp");
  const mobileImgInp = document.getElementById("mobileImgInp");
  const profilePic = document.getElementById("profilePic");
  const profilePicmob = document.getElementById("profilePicmob");

  desktopImgInp.onchange = evt => {
    const [file] = desktopImgInp.files;
    if (file) {
      profilePic.src = URL.createObjectURL(file);
    }
  };

  mobileImgInp.onchange = evt => {
    const [file] = mobileImgInp.files;
    if (file) {
      profilePicmob.src = URL.createObjectURL(file);
    }
  };
</script>
<script>
  // Function to check the viewport width and show/hide elements accordingly
  function handleViewport() {
    var viewportWidth = window.innerWidth || document.documentElement.clientWidth;

    // Show/hide elements based on viewport width
    if (viewportWidth < 768) {
      document.getElementById("desktopcontent").style.display = "none";
      document.getElementById("mobcontent").style.display = "block";
    } else {
      document.getElementById("desktopcontent").style.display = "block";
      document.getElementById("mobcontent").style.display = "none";
    }
  }

  // Run the function on page load
  handleViewport();

  // Run the function on window resize
  window.addEventListener("resize", handleViewport);
</script>
{% endblock %}
